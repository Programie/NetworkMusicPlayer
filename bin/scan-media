#! /usr/bin/env php
<?php
require_once __DIR__ . "/../includes/Config.class.php";
require_once __DIR__ . "/../includes/DBConnection.class.php";
require_once __DIR__ . "/../includes/Logger.class.php";
require_once __DIR__ . "/../includes/MediaScanner.class.php";

$config = new Config();

Logger::$config = $config;

$dbConnection = new DBConnection($config);

$mediaScanner = new MediaScanner($config, $dbConnection->getPdo());

if (isset($argv[1]))
{
	$mediaScanner->scanDir($argv[1]);
}
else
{
	$mediaScanner->fullScan();
}